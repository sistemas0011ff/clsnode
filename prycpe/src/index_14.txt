
import { AppDataSource } from "./data-source";
import { Medic } from "./entity/Medic.entity";

AppDataSource.initialize()
.then( async ()=> {
   
    const medic = await AppDataSource.manager
    .createQueryBuilder()
    .from(Medic, "medico")
    .update()
    .set({name : "Update"})
    .where("medico.id = :id",{id : 6})
    .execute();
    
    
    await AppDataSource.manager.connection.getRepository(Medic).delete(6);

    await AppDataSource.manager
    .createQueryBuilder()
    .from(Medic,"medico")
    .delete()
    .where("medico.id = :id", {id: 1})
    .execute();


    
    const medicoo = await AppDataSource.manager
    .createQueryBuilder()
    .select(["medico.id","medico.lastname"])    
    .from(Medic,"medico")
    .where("medico.id = :id")
    .setParameters({ id : 3 })
    .getOne()
    
    console.log( JSON.stringify(medicoo ,null,"\t"));

})
.catch( console.log );